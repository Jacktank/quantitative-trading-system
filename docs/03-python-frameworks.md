# Python量化交易框架调研

## 1. VectorBT

### 特点
- **性能优势**：基于NumPy、pandas和Numba的全向量化回测引擎，速度极快
- **参数优化**：支持大规模参数网格搜索，可轻松测试上千种策略变体
- **可视化**：集成Plotly和ipywidgets，提供交互式仪表板
- **自定义指标**：通过指标工厂可创建复杂的多输入指标

### 优点
- 回测速度极快，可在1秒内模拟数百万笔交易
- 适合多资产策略和机器学习工作流
- 支持大规模参数优化

### 缺点
- 学习曲线较陡，需要熟悉向量化编程
- 不支持内置实盘交易
- 部分高级功能需要Pro版本
- 不支持逐K线逻辑（需要向量化思维）

### 适用场景
- 量化研究人员
- 多资产策略开发
- 机器学习和因子测试

### 社区与文档
- 较新的项目，社区规模中等
- 文档质量良好

---

## 2. Zipline

### 特点
- **事件驱动架构**：通过initialize()和handle_data()函数实现策略逻辑
- **Pipeline API**：支持复杂的股票池选择和因子排序
- **风险模型**：内置滑点和佣金模型

### 优点
- API清晰易懂，适合新手
- Pipeline API适合股票因子投资
- 学术研究友好

### 缺点
- 安装困难，对Python 3.5-3.6设计，现代Python版本需要使用fork版本
- 性能较慢，事件驱动逐K线执行
- Quantopian关闭后缺乏活跃维护
- 无交互式可视化工具

### 适用场景
- 股票因子投资
- 学术研究
- 结构化Pipeline工作流

### 社区与文档
- 曾经是行业标准，但自Quantopian关闭后活跃度下降
- 文档完整但较旧

---

## 3. Backtrader

### 特点
- **易用性**：基于类的策略定义，Pythonic风格
- **实盘交易**：支持Interactive Brokers、Oanda、Alpaca等券商
- **多数据源**：支持多时间周期和多数据源
- **社区支持**：活跃的论坛和大量教程

### 优点
- 学习曲线平缓，适合初学者
- 支持实盘交易
- 文档丰富，社区活跃
- 支持多时间周期策略

### 缺点
- 不再积极开发
- 性能一般，不适合大数据或高频交易
- 参数优化速度慢（顺序执行）

### 适用场景
- 散户交易者
- 涉及多时间周期和指标的策略
- 策略原型开发和教育

### 社区与文档
- 社区规模大，文档详尽
- 大量第三方教程和案例

---

## 4. VeighNa (原vnpy)

### 特点
- **本土化**：专为中国市场设计，支持国内主流券商和交易所
- **全栈解决方案**：集成回测、模拟、实盘交易
- **丰富的接口**：支持CTP、恒生、飞马等国内主流交易接口

### 优点
- 国内市场支持最好
- 中文文档和社区
- 功能完整的交易系统

### 缺点
- 代码复杂度较高
- 学习曲线较陡
- 主要面向国内市场

### 适用场景
- 国内市场实盘交易
- 需要对接国内券商
- 中文用户

### 社区与文档
- 国内最活跃的量化社区之一
- 中文文档完善

---

## 框架对比总结

| 框架 | 性能 | 易用性 | 实盘交易 | 适用场景 | 学习曲线 |
|------|------|--------|----------|----------|----------|
| VectorBT | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ❌ | 量化研究、参数优化 | 陡峭 |
| Zipline | ⭐⭐ | ⭐⭐⭐⭐ | ❌ | 股票因子研究 | 中等 |
| Backtrader | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ✅ | 策略开发、实盘交易 | 平缓 |
| VeighNa | ⭐⭐⭐ | ⭐⭐⭐ | ✅ | 国内市场实盘 | 陡峭 |

---

## 参考资料
- https://medium.com/@trading.dude/battle-tested-backtesters-comparing-vectorbt-zipline-and-backtrader-for-financial-strategy-dee33d33a9e0
